<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title>Student Management System</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="enhanced-script.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-user-graduate"></i>
                <h1>Student Manager</h1>
            </div>
            <div class="nav-links">
                <button class="nav-btn active" data-view="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" data-view="students">
                    <i class="fas fa-users"></i> Students
                </button>
                <button class="nav-btn" data-view="courses">
                    <i class="fas fa-book"></i> Courses
                </button>
                <button class="nav-btn" data-view="attendance">
                    <i class="fas fa-calendar-check"></i> Attendance
                </button>
                <button class="nav-btn" data-view="grades">
                    <i class="fas fa-chart-line"></i> Grades
                </button>
                <button class="nav-btn" data-view="reports">
                    <i class="fas fa-file-alt"></i> Reports
                </button>
            </div>
            <div class="nav-actions">
                <button id="exportBtn" class="btn-secondary" title="Export Data">
                    <i class="fas fa-download"></i>
                </button>
                <button id="importBtn" class="btn-secondary" title="Import Data">
                    <i class="fas fa-upload"></i>
                </button>
                <input type="file" id="importFile" accept=".json" hidden>
                <div class="theme-toggle">
                    <button id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <div class="header">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                <div class="header-actions">
                    <button id="addStudentBtn" class="btn-primary">
                        <i class="fas fa-user-plus"></i> Add Student
                    </button>
                    <button id="addCourseBtn" class="btn-primary">
                        <i class="fas fa-book-medical"></i> Add Course
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #3b82f6;">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalStudents">0</h3>
                        <p>Total Students</p>
                    </div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up text-success"></i>
                        <span>This Month</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #10b981;">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalCourses">0</h3>
                        <p>Total Courses</p>
                    </div>
                    <div class="stat-trend">
                        <i class="fas fa-book-open"></i>
                        <span>Active</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #f59e0b;">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="attendanceRate">0%</h3>
                        <p>Attendance Rate</p>
                    </div>
                    <div class="stat-trend">
                        <i class="fas fa-chart-line"></i>
                        <span>Today</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: #8b5cf6;">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="avgGrade">0.0</h3>
                        <p>Average Grade</p>
                    </div>
                    <div class="stat-trend">
                        <i class="fas fa-graduation-cap"></i>
                        <span>GPA</span>
                    </div>
                </div>
            </div>

            <!-- Recent Activity & Top Students -->
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> Recent Activity</h3>
                    </div>
                    <div class="card-body">
                        <div class="activity-list" id="recentActivity">
                            <!-- Activities will be loaded here -->
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-trophy"></i> Top Students</h3>
                    </div>
                    <div class="card-body">
                        <div class="top-students" id="topStudents">
                            <!-- Top students will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upcoming Events -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-calendar-day"></i> Upcoming Events</h3>
                    <button id="addEventBtn" class="btn-secondary btn-sm">
                        <i class="fas fa-plus"></i> Add Event
                    </button>
                </div>
                <div class="card-body">
                    <div class="events-list" id="upcomingEvents">
                        <!-- Events will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Students View -->
        <div id="studentsView" class="view">
            <div class="header">
                <h2><i class="fas fa-users"></i> Students Management</h2>
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="studentSearch" placeholder="Search students...">
                    </div>
                    <button id="newStudentBtn" class="btn-primary">
                        <i class="fas fa-user-plus"></i> New Student
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters">
                <select id="studentFilterClass">
                    <option value="">All Classes</option>
                </select>
                <select id="studentFilterStatus">
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
                <button id="clearFilters" class="btn-secondary">
                    <i class="fas fa-filter-circle-xmark"></i> Clear Filters
                </button>
            </div>

            <!-- Students Table -->
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Class</th>
                                    <th>Status</th>
                                    <th>Enrollment Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTable">
                                <!-- Students will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Courses View -->
        <div id="coursesView" class="view">
            <div class="header">
                <h2><i class="fas fa-book"></i> Courses Management</h2>
                <div class="header-actions">
                    <button id="newCourseBtn" class="btn-primary">
                        <i class="fas fa-book-medical"></i> New Course
                    </button>
                </div>
            </div>

            <!-- Courses Grid -->
            <div class="courses-grid" id="coursesGrid">
                <!-- Courses will be loaded here -->
            </div>
        </div>

        <!-- Attendance View -->
        <div id="attendanceView" class="view">
            <div class="header">
                <h2><i class="fas fa-calendar-check"></i> Attendance Management</h2>
                <div class="header-actions">
                    <input type="date" id="attendanceDate" class="date-picker">
                    <button id="markAttendanceBtn" class="btn-primary">
                        <i class="fas fa-check-circle"></i> Mark Attendance
                    </button>
                </div>
            </div>

            <!-- Attendance Table -->
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Student ID</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Remarks</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="attendanceTable">
                                <!-- Attendance records will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grades View -->
        <div id="gradesView" class="view">
            <div class="header">
                <h2><i class="fas fa-chart-line"></i> Grades Management</h2>
                <div class="header-actions">
                    <select id="gradeCourseFilter">
                        <option value="">All Courses</option>
                    </select>
                    <button id="addGradeBtn" class="btn-primary">
                        <i class="fas fa-plus-circle"></i> Add Grade
                    </button>
                </div>
            </div>

            <!-- Grades Chart -->
            <div class="card">
                <div class="card-header">
                    <h3>Grade Distribution</h3>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="gradesChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Grades Table -->
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Course</th>
                                    <th>Grade</th>
                                    <th>Percentage</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="gradesTable">
                                <!-- Grades will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports View -->
        <div id="reportsView" class="view">
            <div class="header">
                <h2><i class="fas fa-file-alt"></i> Reports & Analytics</h2>
                <div class="header-actions">
                    <select id="reportType">
                        <option value="attendance">Attendance Report</option>
                        <option value="grades">Grade Report</option>
                        <option value="students">Student Report</option>
                        <option value="courses">Course Report</option>
                    </select>
                    <button id="generateReportBtn" class="btn-primary">
                        <i class="fas fa-file-export"></i> Generate Report
                    </button>
                    <button id="printReportBtn" class="btn-secondary">
                        <i class="fas fa-print"></i> Print
                    </button>
                </div>
            </div>

            <!-- Report Content -->
            <div class="card">
                <div class="card-body">
                    <div id="reportContent">
                        <!-- Report will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="studentModalTitle">Add New Student</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="studentForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="studentId">Student ID *</label>
                            <input type="text" id="studentId" required>
                        </div>
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone">
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" id="dob" class="date-picker">
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender">
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="class">Class *</label>
                            <input type="text" id="class" required>
                        </div>
                        <div class="form-group">
                            <label for="section">Section</label>
                            <input type="text" id="section">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <textarea id="address" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="enrollmentDate">Enrollment Date *</label>
                            <input type="date" id="enrollmentDate" class="date-picker" required>
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label for="notes">Notes</label>
                            <textarea id="notes" rows="3"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="submit" form="studentForm" class="btn-primary">Save Student</button>
            </div>
        </div>
    </div>

    <!-- Course Modal -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="courseModalTitle">Add New Course</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="courseForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="courseCode">Course Code *</label>
                            <input type="text" id="courseCode" required>
                        </div>
                        <div class="form-group">
                            <label for="courseName">Course Name *</label>
                            <input type="text" id="courseName" required>
                        </div>
                        <div class="form-group">
                            <label for="courseInstructor">Instructor</label>
                            <input type="text" id="courseInstructor">
                        </div>
                        <div class="form-group">
                            <label for="courseCredits">Credits</label>
                            <input type="number" id="courseCredits" min="1" max="10" value="3">
                        </div>
                        <div class="form-group">
                            <label for="courseDuration">Duration (weeks)</label>
                            <input type="number" id="courseDuration" min="1" max="52" value="16">
                        </div>
                        <div class="form-group">
                            <label for="courseSchedule">Schedule</label>
                            <input type="text" id="courseSchedule" placeholder="Mon, Wed, Fri 10:00-11:00">
                        </div>
                        <div class="form-group full-width">
                            <label for="courseDescription">Description</label>
                            <textarea id="courseDescription" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="courseStartDate">Start Date</label>
                            <input type="date" id="courseStartDate" class="date-picker">
                        </div>
                        <div class="form-group">
                            <label for="courseEndDate">End Date</label>
                            <input type="date" id="courseEndDate" class="date-picker">
                        </div>
                        <div class="form-group">
                            <label for="courseStatus">Status</label>
                            <select id="courseStatus">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="submit" form="courseForm" class="btn-primary">Save Course</button>
            </div>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div id="attendanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mark Attendance</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="attendanceForm">
                    <div class="form-group">
                        <label for="attendanceStudent">Student *</label>
                        <select id="attendanceStudent" required>
                            <option value="">Select Student</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="attendanceDateModal">Date *</label>
                        <input type="date" id="attendanceDateModal" class="date-picker" required>
                    </div>
                    <div class="form-group">
                        <label for="attendanceStatus">Status *</label>
                        <select id="attendanceStatus" required>
                            <option value="present">Present</option>
                            <option value="absent">Absent</option>
                            <option value="late">Late</option>
                            <option value="excused">Excused</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="attendanceRemarks">Remarks</label>
                        <textarea id="attendanceRemarks" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="submit" form="attendanceForm" class="btn-primary">Save Attendance</button>
            </div>
        </div>
    </div>

    <!-- Grade Modal -->
    <div id="gradeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Grade</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="gradeForm">
                    <div class="form-group">
                        <label for="gradeStudent">Student *</label>
                        <select id="gradeStudent" required>
                            <option value="">Select Student</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gradeCourse">Course *</label>
                        <select id="gradeCourse" required>
                            <option value="">Select Course</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gradeScore">Score (0-100) *</label>
                        <input type="number" id="gradeScore" min="0" max="100" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="gradeDate">Date *</label>
                        <input type="date" id="gradeDate" class="date-picker" required>
                    </div>
                    <div class="form-group">
                        <label for="gradeRemarks">Remarks</label>
                        <textarea id="gradeRemarks" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="submit" form="gradeForm" class="btn-primary">Save Grade</button>
            </div>
        </div>
    </div>

    <!-- Event Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Event</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="eventForm">
                    <div class="form-group">
                        <label for="eventTitle">Event Title *</label>
                        <input type="text" id="eventTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="eventDate">Date *</label>
                        <input type="date" id="eventDate" class="date-picker" required>
                    </div>
                    <div class="form-group">
                        <label for="eventTime">Time</label>
                        <input type="time" id="eventTime">
                    </div>
                    <div class="form-group">
                        <label for="eventType">Type</label>
                        <select id="eventType">
                            <option value="exam">Exam</option>
                            <option value="holiday">Holiday</option>
                            <option value="meeting">Meeting</option>
                            <option value="activity">Activity</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="eventDescription">Description</label>
                        <textarea id="eventDescription" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="submit" form="eventForm" class="btn-primary">Save Event</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary modal-close">Cancel</button>
                <button type="button" id="confirmAction" class="btn-danger">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <div class="toast-message"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>